---
import Layout from "../layouts/Layout.astro";
import BioHero from "../components/biography/BioHero.astro";
import BioIntro from "../components/biography/BioIntro.astro";
import BioSection from "../components/biography/BioSection.astro";
import BioClosing from "../components/biography/BioClosing.astro";
import { DrYosryBio } from "../data";
import drYosryImage from "../assets/dr-yosry-bio-cover.jpg";

// Parse the biography content
const bioSectionsRaw = DrYosryBio.split('##').filter(section => section.trim());
const introText = bioSectionsRaw[0].trim();

const contentSections = bioSectionsRaw.slice(1).map(section => {
  const lines = section.trim().split('\n');
  const title = lines[0].trim();
  const content = lines.slice(1).join('\n').trim();
  return { title, content };
});
---

<Layout title="السيرة الذاتية - الدكتور يسري جبر">
  
  <BioHero image={drYosryImage} />

  <BioIntro text={introText} />

  {contentSections.map((section, index) => (
    <BioSection 
      title={section.title} 
      content={section.content} 
      index={index} 
    />
  ))}

  <BioClosing />

</Layout>
