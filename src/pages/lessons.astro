---
import Layout from "../layouts/Layout.astro";
import LessonsApp from "../components/lessons/LessonsApp";
import { 
  loadPlaylistsWithVideos, 
  loadChannelVideos,
  categories, 
  channelInfo 
} from "../lib/videoLoader";

// Load all data using the centralized loader
const [playlistsWithVideos, channelVideos] = await Promise.all([
  loadPlaylistsWithVideos(),
  loadChannelVideos(),
]);
---

<Layout title="المكتبة المرئية | الدروس والمحاضرات">
  <LessonsApp 
    client:load
    playlists={playlistsWithVideos}
    channelVideos={channelVideos}
    channelInfo={channelInfo}
    categories={categories}
  />
</Layout>
