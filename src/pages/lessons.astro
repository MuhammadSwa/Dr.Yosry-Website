---
import Layout from '../layouts/Layout.astro';
import { YouTube } from '@astro-community/astro-embed-youtube';
import {ChannelInfo } from '../components/demo';
---
<Layout>
  <ChannelInfo client:load/>
</Layout>
<script>
// async function getPlaylistFromCobalt(playlistUrl) {
//     try {
//         const response = await fetch('https://api.cobalt.tools/api/json', {
//             method: 'POST',
//             headers: {
//                 'Accept': 'application/json',
//                 'Content-Type': 'application/json'
//             },
//             body: JSON.stringify({
//                 url: playlistUrl,
//                 // "isAudioOnly": true // optional optimization
//             })
//         });
// 
//         const data = await response.json();
// 
//         // Cobalt might return a "picker" array for playlists
//         if (data.picker) {
//             const videos = data.picker.map(item => ({
//                 id: item.url.split("v=")[1] || item.url, 
//                 title: item.title,
//                 thumbnail: item.thumb
//             }));
//             console.log("Cobalt Videos:", videos);
//             return videos;
//         } else {
//             console.log("Not a playlist or only 1 video found");
//         }
// 
//     } catch (error) {
//         console.error("Cobalt Error:", error);
//     }
// }
// 
// // Usage
// getPlaylistFromCobalt("https://www.youtube.com/playlist?list=PL123456789ABCDEF");
// 
// const INSTANCE_URL = 'https://inv.nadeko.net'; 
// // Alternatives: 'https://yewtu.be', 'https://vid.puffyan.us'
// function getPlaylistIdFromUrl(url) {
//     try {
//         const urlObj = new URL(url);
//         return urlObj.searchParams.get("list");
//     } catch (e) {
//         return null;
//     }
// }
// 
// async function getPlaylistData(playlistId) {
//     try {
//         // Invidious API Endpoint for Playlists
//         const response = await fetch(`${INSTANCE_URL}/api/v1/playlists/${playlistId}`);
//         
//         if (!response.ok) {
//             throw new Error(`Error: ${response.status}`);
//         }
// 
//         const data = await response.json();
// 
//         return {
//             title: data.title,
//             author: data.author,
//             videoCount: data.videoCount,
//             videos: data.videos.map(v => ({
//                 id: v.videoId,
//                 title: v.title,
//                 thumbnail: v.videoThumbnails[0]?.url // Invidious provides multiple qualities
//             }))
//         };
//     } catch (error) {
//         console.error("Failed to fetch playlist:", error);
//         return null;
//     }
// }
 </script>
